<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –æ—Ç—Ö–æ–¥–æ–≤</title>

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" defer></script>

    <!-- QRCode -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- –í—Ö–æ–¥ / —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è -->
    <div id="loginPanel" class="login-panel">
      <h2>–í—Ö–æ–¥ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
      <input type="text" id="username" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è" />
      <select id="role">
        <option value="buyer">–ü–æ–∫—É–ø–∞—Ç–µ–ª—å</option>
        <option value="seller">–ü—Ä–æ–¥–∞–≤–µ—Ü</option>
      </select>
      <button onclick="login()">–í–æ–π—Ç–∏</button>  
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
    <div id="mainInterface" style="display: none">
      <div class="container">
        <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="left-panel" id="sellerPanel">
          <div id="welcome" style="text-align: center; font-weight: bold; margin-bottom: 15px"></div>

          <h3>–°–æ–∑–¥–∞—Ç—å –ª–æ—Ç</h3>
          <input type="text" id="title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ç—Ö–æ–¥–∞" /><br />
          <input type="number" id="price" placeholder="–¶–µ–Ω–∞ –≤ —Ç–≥ –∑–∞ –∫–≥\–ª–∏—Ç—Ä" /><br />
          <input type="number" id="amount" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –∫–≥\–ª–∏—Ç—Ä" /><br />
          <select id="unit">
            <option value="–∫–≥">–∫–≥</option>
            <option value="–ª–∏—Ç—Ä">–ª–∏—Ç—Ä</option>
          </select><br />   
          <button id="openMapBtn">üìç –í—ã–±—Ä–∞—Ç—å —Ç–æ—á–∫—É</button>

          <div id="mapWrapper" style="display:none;">
            <button id="closeMapBtn">‚úñ –ó–∞–∫—Ä—ã—Ç—å</button>
            <div id="map" style="height:400px;"></div>
          </div>

          <label for="lotImage">–§–æ—Ç–æ –ª–æ—Ç–∞:</label>
          <input type="file" id="lotImage" accept="image/*" />

          <input type="hidden" id="lat">
          <input type="hidden" id="lng">
          <button onclick="createLot()">–°–æ–∑–¥–∞—Ç—å –ª–æ—Ç</button>
          <button onclick="clearHistory()" class="clear-btn" style="margin-top: 10px">–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
          <button id="archiveBtn">
            üóÇ –ê—Ä—Ö–∏–≤ –ø–æ–∫—É–ø–æ–∫
          </button>
          
          <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞—Ä—Ö–∏–≤–∞ -->
          <div id="archiveModal" class="modal">
            <div class="modal-content">
              <span id="closeArchive" class="close">&times;</span>
              <h2>–ê—Ä—Ö–∏–≤ –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –ª–æ—Ç–æ–≤</h2>
              <div id="archiveContent"></div>
            </div>
          </div>
        </div>
        
        <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å: —Å–ø–∏—Å–æ–∫ –ª–æ—Ç–æ–≤ -->
        <div class="right-panel" id="lots"></div>
      </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–∞—Ä—Ç—ã -->
    <div id="lotMapModal" style="
      display:none;
      position: fixed;
      top: 50px;
      right: 20px;
      width: 500px;
      height: 500px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.3);
      z-index: 9999;
      overflow: hidden;
    ">
      <button id="closeLotMap" style="
        position:absolute; top:10px; right:10px; z-index:10000;
        background:#e74c3c; color:white; border:none; border-radius:50%;
        width:30px; height:30px; cursor:pointer; font-weight:bold;">‚úñ</button>
      <div id="lotMap" style="width:100%; height:100%;"></div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π JS -->
    <script src="app.js"></script>
  </body>
</html>
